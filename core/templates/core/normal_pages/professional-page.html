{% load static %}

<!doctype html>
<html lang="en">

<head>
  <title>{{professional.first_name}} {{professional.last_name}} - JurisJunction</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS v5.2.1 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="{% static 'css/professional-page-styles.css' %}"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap">
    
</head>


<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YM1GGXVM19"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-YM1GGXVM19');
</script>

<div id="professional" data-pk="{{ professional.pk }}"></div>


<body>
  <div class="alert alert-success sticky-top" role="alert" id="successAlert" style= "display:none;"> 
    <p>Email sent.</p>
    <button type="button" class="btn-close alert-close" data-bs-dismiss="alert" aria-label="Close" id="closeSuccessAlert"></button>
  </div>
  <div class="alert alert-success sticky-top" role="alert" id="successAlertReview" style= "display:none;"> 
    <p>Review Submitted Sucessfully.</p>
    <button type="button" class="btn-close alert-close" data-bs-dismiss="alert" aria-label="Close" id="closeSuccessAlert"></button>
  </div>
  <div class="alert alert-danger sticky-top" role="alert" id="failAlertReview" style= "display:none;"> 
    <p>Error in submitting review. Please make sure everything was properly filled out, and try again.</p>
    <button type="button" class="btn-close alert-close" data-bs-dismiss="alert" aria-label="Close" id="closeSuccessAlert"></button>
  </div>
  <div class="alert alert-danger sticky-top" role="alert" id="repeatAlertReview" style= "display:none;"> 
    <p>You have already reviewed this professional.</p>
    <button type="button" class="btn-close alert-close" data-bs-dismiss="alert" aria-label="Close" id="closeSuccessAlert"></button>
  </div>
  <div id="overlay" class="overlay"></div>

  {% include 'navbar.html' %}

  <main>
      <img class="background-photo" src="{{professional.background_picture.url}}" alt="">
      <div class="page-content">
          <div class="pfp-and-name-row shadow-sm">
            <div class="pfp-and-name-container">
              <img class="shadow" src="{{professional.profile_picture.url}}" alt="Professional pfp">
              <div class="name-and-location">
                <h2>{{professional.first_name}} {{professional.last_name}}</h2>
                <p>Accountant at {{professional.firm_name}}</p>
                <div class="location-info">
                  <i class="bi bi-geo-alt-fill"></i>
                  <p>{{professional.location}}</p>
                </div>
              </div>
              <div class="review-ranking-container">
                {% if professional.average_rating %}
                <div class="rating-items">
                  <p class="rating">{{professional.average_rating}}</p>
                  <div class="stars-and-reviews">
                    <div class="stars">
                      <i class="bi bi-star rating-star"></i>
                      <i class="bi bi-star rating-star"></i>
                      <i class="bi bi-star rating-star"></i>
                      <i class="bi bi-star rating-star"></i>
                      <i class="bi bi-star rating-star"></i>
                    </div>
                    <p class="num-of-reviews-text">{{professional.num_of_reviews}} <a href="#reviews-container">{% if professional.num_of_reviews == 1%} Review {%else%} Reviews {%endif%}</a></p>
                  </div>
                </div>
                {% else %}
                <h3>No Reviews Yet.</h3>
                {%endif%}

              </div>
            </div>
          </div>
        <div class="other-profile-info">
          <div class="contact-and-bio">
            <div class="contact-info-container">
              <p class="contact-title">Contact Information</p>
              <div class="contact-item">
                <i class="bi bi-phone"></i>
                <a href="tel:{{professional.contact_number}}">(Mobile) {{professional.contact_number}}</a>
              </div>
              <div class="contact-item">
                <i class="bi bi-building"></i>
                <a href="tel:{{professional.contact_number}}">(Office) {{professional.contact_number}}</a>
              </div>
              <div class="contact-item">
                <i class="bi bi-envelope"></i>
                <a href="mailto:{{profesisonal.email}}">{{professional.email}}</a>
              </div>
              <div class="button-container">
                <button class="default-button">
                  <i class="bi bi-chat-fill"></i>
                  <p>Contact</p>
                </button>
              </div>
            </div>
            <div class="bio-info">
              <h5 class="section-title">About {{professional.first_name}}</h5>
              <p class="bio-desc">{{professional.description}}</p>
            </div>
          </div>
          <div class="main-other-info">
            <div class="specialties-info">
              <h5 class="section-title">Specialties</h5>
              <hr>
              <p class="card-content">
                {% for specialty in professional.specialties.all %}
                <li>
                  <ul class="specialty-bullet">{{specialty}}</ul>
                </li>
                {%endfor%}
              </p>
            </div>
          <div class="grid-container">
            <div class="row">
              <div class="col">
                <div class="card shadow desc-card">
                  <div class="card-title-and-content">
                    <div class="icon-alignment-container">
                      <div class="card-icon-container">
                        <i class="bi bi-translate"></i>
                      </div>
                    </div>
                    <p class="card-title">Languages</p>
                    <p class="card-content">
                      {% for language in professional.languages.all %}
                      {{language}},
                      {%endfor%}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card shadow desc-card">
                  <div class="card-title-and-content">
                    <div class="icon-alignment-container">
                      <div class="card-icon-container">
                        <i class="bi bi-coin"></i>
                      </div>
                    </div>
                    <p class="card-title">Fee Structure</p>
                    <p class="card-content">
                      {{professional.fee_structure}}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card shadow-lg desc-card">
                  <div class="card-title-and-content">
                    <div class="icon-alignment-container">
                      <div class="card-icon-container">
                        <i class="bi bi-briefcase-fill"></i>
                      </div>
                    </div>
                    <p class="card-title">Firm</p>
                    <p class="card-content">
                      {{professional.firm_name}}
                    </p>
                    <p class="card-content">
                      <a href="">www.firmwebsite.ca</a>
                    </p>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card shadow desc-card">
                  <div class="card-title-and-content">
                    <div class="icon-alignment-container">
                      <div class="card-icon-container">
                        <i class="bi bi-hourglass-split"></i>
                      </div>
                    </div>
                    <p class="card-title">Years of Experience</p>
                    <p class="card-content">
                      {{professional.experience_years}}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card shadow desc-card">
                  <div class="card-title-and-content">
                    <div class="icon-alignment-container">
                      <div class="card-icon-container">
                        <i class="bi bi-award-fill"></i>
                      </div>
                    </div>
                    <p class="card-title">Designations</p>
                    <p class="card-content">
                      {% for designation in professional.designations.all %}
                      {{designation}},
                      {%endfor%}
                    </p>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card shadow desc-card">
                  <div class="card-title-and-content">
                    <div class="icon-alignment-container">
                      <div class="card-icon-container">
                        <i class="bi bi-mortarboard-fill"></i>
                      </div>
                    </div>
                    <p class="card-title">School Studied at</p>
                    <p class="card-content">
                      {{professional.school_studied_at}}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          </div>

          <div class="reviews-section-container">
            <div class="form-open">
              <small class="review-btn-text">Have you connected with {{professional.first_name}} before?</small>
              <button type="button" class="default-button review-button" id="reviewButton">Leave a Review</button>
            </div>

            <div class="review-form-container" id="reviewFormContainer">
              <form class="review-form" id="reviewForm" method="POST">
                {% csrf_token %}
                <button type="button" class="btn-close" aria-label="Close" id="contactFormCloseButton"></button>
                <div class="mb-3">
                  <label for="InputName" class="form-label">Name</label>
                  <input type="text" class="form-control" id="inputNameReview" name="inputNameReview" required>
                </div>
                <div class="mb-3">
                  <label for="InputEmail" class="form-label">Email address</label>
                  <input type="email" class="form-control" id="inputEmail" name="inputEmail" aria-describedby="emailHelp" required>
                  <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
                </div>
                <div class="stars-and-text">
                  <h3>Rating:</h3>
                  <div class="star-container" id="starRating" name="starRating">
                    <i class="bi bi-star star-id h1" data-value="1"></i>
                    <i class="bi bi-star star-id h1" data-value="2"></i>
                    <i class="bi bi-star star-id h1" data-value="3"></i>
                    <i class="bi bi-star star-id h1" data-value="4"></i>
                    <i class="bi bi-star star-id h1" data-value="5"></i>
                  </div>
              </div>
          
                <div class="mb-3">
                  <label for="InputReview" class="form-label">Message</label>
                  <textarea type="review" class="form-control" id="inputReview" name="inputReview" required></textarea>
                </div>
                <div class="h-captcha" id='reviewCaptcha' data-error-callback="onError"></div>
                <button type="submit" class="default-button" id="submitReviewButton">Submit</button>
              </form>
            </div>
            <div class="review-section">
              <h3 class="section-title">Reviews</h3>
              {% if professional.average_rating %}
              <div class="stars-and-rating">
                <div class="stars">
                  <i class="bi bi-star review-star"></i>
                  <i class="bi bi-star review-star"></i>
                  <i class="bi bi-star review-star"></i>
                  <i class="bi bi-star review-star"></i>
                  <i class="bi bi-star review-star"></i>
              </div>
                <p class="out-of-reviews-text">{{professional.average_rating}} Out of 5</p>
              </div>
              {%endif%}
              <p class="num-of-reviews-text">{{professional.num_of_reviews}} {% if professional.num_of_reviews == 1%} Review {%else%} Reviews {%endif%}</p>
              <div class="reviews" id="reviews-container"></div>
            </div>
          </div>
        </div>
        </div>
        
    
  </main>

  {% include 'footer.html' %}
  
  <!-- Bootstrap JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
    integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
  </script>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="{% static 'js/professionalPage.js' %}"></script>
<script src="https://js.hcaptcha.com/1/api.js?hl=en" async defer onload="initCaptcha()"></script>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
    integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">
  </script>
</body>

</html>